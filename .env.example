###############################################
# Bonsai Stack - .env.example
# Copia in .env e personalizza.
# NON committare credenziali reali.
###############################################

# =========================================================
# === MQTT (BACKEND -> BROKER via TCP) ====================
# Usato dal server Node per connettersi al broker e
# salvare log/pubbicare comandi.
#
# In Docker Compose: usa il nome del servizio "mqtt"
#   MQTT_URL=mqtt://mqtt:1883
#
# Bare-metal (broker sullo stesso host):
#   MQTT_URL=mqtt://127.0.0.1:1883
#
# HiveMQ Cloud (esempio TLS):
#   MQTT_URL=mqtts://<tenant>.s1.eu.hivemq.cloud:8883
#   (in tal caso assicurati di gestire certificati/`setInsecure()` lato client)
# =========================================================
MQTT_URL=mqtt://mqtt:1883
MQTT_USERNAME=your-mqtt-username
MQTT_PASSWORD=your-mqtt-password

# =========================================================
# === MQTT (FRONTEND -> BROKER via WebSocket) =============
# Usato dal BROWSER (dashboard) per connettersi al broker.
#
# In Compose (solo interno): ws://mqtt:9001
# In LAN (Pi all’IP 192.168.1.240): ws://192.168.1.240:9001
# Con Cloudflare Tunnel (hostname pubblico): wss://bonsai-iot-mqtt.example.com
#
# Nota: WebSocket richiede che Mosquitto abbia un listener 9001 "protocol websockets".
# =========================================================
MQTT_WS_HOST=ws://mqtt:9001

# =========================================================
# === SERVER HTTP (BACKEND NODE) ==========================
# Dove il server Express ascolta in locale.
# =========================================================
HOST=0.0.0.0
PORT=3000

# =========================================================
# === OTA / MANIFEST (URL PUBBLICI) =======================
# BASE_URL è l'URL pubblico usato per generare il "url" nel manifest.json
# UPDATE_HOST (opzionale) se vuoi limitare cosa servire su un hostname
# dedicato agli OTA (es: bloccare la UI su quell'host).
#
# Esempio con Cloudflare Tunnel:
#   BASE_URL=https://bonsai-iot-update.example.com
#   UPDATE_HOST=bonsai-iot-update.example.com
#
# In LAN (solo rete interna):
#   BASE_URL=http://192.168.1.240:3000
#   (lascia UPDATE_HOST vuoto)
# =========================================================
BASE_URL=http://localhost:3000
# UPDATE_HOST=

# =========================================================
# === MONGODB =============================================
# In Compose: usa il nome del servizio "mongo".
# Bare-metal: mongodb://127.0.0.1:27017
# =========================================================
MONGODB_URI=mongodb://mongo:27017
MONGODB_DB=bonsai
MONGODB_COLLECTION=logs

# =========================================================
# === LOGGING =============================================
# DEBUG=true abilita log verbosi in console.
# =========================================================
DEBUG=true
